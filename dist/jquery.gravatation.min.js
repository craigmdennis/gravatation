(function(){var t=function(t,n){return function(){return t.apply(n,arguments)}},n=[].slice;!function(i,a){var e;return e=function(){function n(n,a){this.returnGravatar=t(this.returnGravatar,this),this.validate=t(this.validate,this),this.getInputValidity=t(this.getInputValidity,this),this.getInputValue=t(this.getInputValue,this),this.options=i.extend({},this.defaults,a),this.$el=i(n),this.bind(),this.options.onValid(this.$el),void 0}return n.prototype.defaults={size:40,secure:!1,onInit:null,onInvalid:null,onValid:null,onGravatarSuccess:null,onGravatarFail:null,onEmpty:null,timeout:500,ext:!0,d:""},n.prototype.bind=function(){return this.validate(),this.$el.on("input",i.debounce(this.options.timeout,this.validate))},n.prototype.unbind=function(){return this.$el.off("input")},n.prototype.getInputValue=function(){return this.$el.val()},n.prototype.getInputValidity=function(){return this.$el.context.validity.valid},n.prototype.validate=function(){var t;return t=this.getInputValue(),t.length>0?this.getInputValidity()?(this.options.onValid(this.$el),this.returnGravatar()):this.options.onInvalid(this.$el):this.options.onEmpty(this.$el)},n.prototype.gravatarRequest=function(){var t,n,a,e;return e=this.options.secure?"https://secure":"http://www",e+=".gravatar.com/avatar/",n=hex_md5(this.getInputValue()),t=this.options.ext?".jpg":"",i.isFunction(this.options.onGravatarFail)&&(this.options.d="404"),a={size:this.options.size,d:this.options.d},e+n+t+"?"+i.param(a)},n.prototype.returnGravatar=function(){var t;return t=i("<img />"),t.error(function(n){return function(){return n.options.onGravatarFail(t,n.gravatarRequest(),n.$el),!1}}(this)).load(function(n){return function(){return n.options.onGravatarSuccess(t,n.gravatarRequest(),n.$el),!0}}(this)).attr("src",this.gravatarRequest())},n}(),i.fn.extend({gravatation:function(){var t,a;return a=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this.each(function(){var n,r;return n=i(this),r=n.data("gravatation"),r||n.data("gravatation",r=new e(this,a)),"string"==typeof a?r[a].apply(r,t):void 0})}})}(window.jQuery,window)}).call(this);