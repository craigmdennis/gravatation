(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i=[].slice;!function(n,o){var a;return a=function(){function i(i,o){this.returnGravatar=t(this.returnGravatar,this),this.getInputValidity=t(this.getInputValidity,this),this.getInputValue=t(this.getInputValue,this),this.options=n.extend({},this.defaults,o),this.$el=n(i),this.bind(),this.options.onValid(this.$el),void 0}return i.prototype.defaults={size:40,secure:!1,onInit:function(){},onInput:function(){},onInvalid:function(){},onValid:function(){},onGravatarSuccess:function(){},onGravatarFail:function(){},onEmpty:function(){},timeout:500,validate:"input",ext:!0,d:""},i.prototype.bind=function(){return this.options.validate&&this.getInputValidity(),"blur"===this.options.validate?this.$el.on(this.options.validate,this.getInputValidity):this.options.validate&&this.$el.on(this.options.validate,n.debounce(this.options.timeout,this.getInputValidity)),this.$el.on("input",n.debounce(this.options.timeout,this.returnGravatar))},i.prototype.unbind=function(){return this.$el.off("input "+this.options.validate)},i.prototype.getInputValue=function(){var t;return t=this.$el.val(),0===t.length?!1:t},i.prototype.getInputValidity=function(){var t,i;return t=this.$el.context.validity.valid,i=this.getInputValue(),i?t?(this.options.onValid(this.$el,i),i):(this.options.onInvalid(this.$el),!1):this.options.onEmpty(this.$el)},i.prototype.gravatarRequest=function(){var t,i,o,a;return a=this.options.secure?"https://secure":"http://www",a+=".gravatar.com/avatar/",i=SparkMD5.hash(this.getInputValue()),t=this.options.ext?".jpg":"",n.isFunction(this.options.onGravatarFail)&&(this.options.d="404"),o={size:this.options.size,d:this.options.d},a+i+t+"?"+n.param(o)},i.prototype.returnGravatar=function(){var t;return this.options.onInput(this.$el),t=n("<img />"),t.error(function(i){return function(){return i.options.onGravatarFail(t,i.gravatarRequest(),i.$el),!1}}(this)).load(function(i){return function(){return i.options.onGravatarSuccess(t,i.gravatarRequest(),i.$el)}}(this)).attr("src",this.gravatarRequest())},i}(),n.fn.extend({gravatation:function(){var t,o;return o=arguments[0],t=2<=arguments.length?i.call(arguments,1):[],this.each(function(){var i,e;return i=n(this),e=i.data("gravatation"),e||i.data("gravatation",e=new a(this,o)),"string"==typeof o?e[o].apply(e,t):void 0})}})}(window.jQuery,window)}).call(this);